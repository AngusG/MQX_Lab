   1              		.syntax unified
   2              		.cpu cortex-m4
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 6
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.thumb
  14              		.file	"DisplayTask.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.section	.rodata
  19              		.align	2
  20              	.LC2:
  21 0000 0A204469 		.ascii	"\012 Display task started\012\000"
  21      73706C61 
  21      79207461 
  21      736B2073 
  21      74617274 
  22              		.align	2
  23              	.LC3:
  24 0018 44697370 		.ascii	"Display task received message %d: %d\012\000"
  24      6C617920 
  24      7461736B 
  24      20726563 
  24      65697665 
  25 003e 0000     		.align	2
  26              	.LC0:
  27 0040 01000000 		.word	1
  28 0044 01000000 		.word	1
  29 0048 01000000 		.word	1
  30 004c 01000000 		.word	1
  31              		.align	2
  32              	.LC1:
  33 0050 0B000080 		.word	-2147483637
  34 0054 1C000080 		.word	-2147483620
  35 0058 1D000080 		.word	-2147483619
  36 005c 0A000080 		.word	-2147483638
  37              		.section	.text.Display_task,"ax",%progbits
  38              		.align	2
  39              		.global	Display_task
  40              		.thumb
  41              		.thumb_func
  43              	Display_task:
  44              	.LFB0:
  45              		.file 1 "../Sources/DisplayTask.c"
   1:../Sources/DisplayTask.c **** /*
   2:../Sources/DisplayTask.c ****  * DisplayTask.c
   3:../Sources/DisplayTask.c ****  *
   4:../Sources/DisplayTask.c ****  *  Created on: Feb 6, 2014
   5:../Sources/DisplayTask.c ****  *      Author: Embedded Access Inc
   6:../Sources/DisplayTask.c ****  */
   7:../Sources/DisplayTask.c **** 
   8:../Sources/DisplayTask.c **** #include "main.h"
   9:../Sources/DisplayTask.c **** 
  10:../Sources/DisplayTask.c **** 
  11:../Sources/DisplayTask.c **** /*TASK*-----------------------------------------------------
  12:../Sources/DisplayTask.c **** * 
  13:../Sources/DisplayTask.c **** * Task Name    : Display_task
  14:../Sources/DisplayTask.c **** * Comments     :
  15:../Sources/DisplayTask.c **** *    This is the Display task
  16:../Sources/DisplayTask.c **** *
  17:../Sources/DisplayTask.c **** *END*-----------------------------------------------------*/
  18:../Sources/DisplayTask.c **** 
  19:../Sources/DisplayTask.c **** void Display_task(uint32_t initial_data)
  20:../Sources/DisplayTask.c **** {
  46              		.loc 1 20 0
  47              		.cfi_startproc
  48              		@ args = 0, pretend = 0, frame = 120
  49              		@ frame_needed = 1, uses_anonymous_args = 0
  50 0000 90B5     		push	{r4, r7, lr}
  51              	.LCFI0:
  52              		.cfi_def_cfa_offset 12
  53              		.cfi_offset 4, -12
  54              		.cfi_offset 7, -8
  55              		.cfi_offset 14, -4
  56 0002 9FB0     		sub	sp, sp, #124
  57              	.LCFI1:
  58              		.cfi_def_cfa_offset 136
  59 0004 00AF     		add	r7, sp, #0
  60              	.LCFI2:
  61              		.cfi_def_cfa_register 7
  62 0006 7860     		str	r0, [r7, #4]
  21:../Sources/DisplayTask.c **** 	_queue_id my_qid;
  22:../Sources/DisplayTask.c **** 	APPLICATION_MESSAGE *msg;
  23:../Sources/DisplayTask.c **** 	
  24:../Sources/DisplayTask.c **** 	/* Lab 5 variables */
  25:../Sources/DisplayTask.c **** 	LWGPIO_STRUCT leds[4];
  26:../Sources/DisplayTask.c **** 	uint32_t i;
  27:../Sources/DisplayTask.c **** 	uint32_t func[4] = { BSP_LED1_MUX_GPIO, 
  63              		.loc 1 27 0
  64 0008 40F20003 		movw	r3, #:lower16:.LC0
  65 000c C0F20003 		movt	r3, #:upper16:.LC0
  66 0010 07F11C04 		add	r4, r7, #28
  67 0014 0FCB     		ldmia	r3, {r0, r1, r2, r3}
  68 0016 84E80F00 		stmia	r4, {r0, r1, r2, r3}
  28:../Sources/DisplayTask.c **** 						 BSP_LED2_MUX_GPIO,
  29:../Sources/DisplayTask.c **** 						 BSP_LED3_MUX_GPIO, 
  30:../Sources/DisplayTask.c **** 						 BSP_LED4_MUX_GPIO };
  31:../Sources/DisplayTask.c **** 	
  32:../Sources/DisplayTask.c **** 	LWGPIO_PIN_ID pins[4] = { BSP_LED1, BSP_LED2, BSP_LED3, BSP_LED4 };
  69              		.loc 1 32 0
  70 001a 40F20003 		movw	r3, #:lower16:.LC1
  71 001e C0F20003 		movt	r3, #:upper16:.LC1
  72 0022 07F10C04 		add	r4, r7, #12
  73 0026 0FCB     		ldmia	r3, {r0, r1, r2, r3}
  74 0028 84E80F00 		stmia	r4, {r0, r1, r2, r3}
  33:../Sources/DisplayTask.c **** 	
  34:../Sources/DisplayTask.c **** 	printf("\n Display task started\n"); 
  75              		.loc 1 34 0
  76 002c 40F20000 		movw	r0, #:lower16:.LC2
  77 0030 C0F20000 		movt	r0, #:upper16:.LC2
  78 0034 FFF7FEFF 		bl	_io_printf
  35:../Sources/DisplayTask.c **** 	
  36:../Sources/DisplayTask.c **** 	my_qid = _msgq_open(DISPLAY_QUEUE, 0);	
  79              		.loc 1 36 0
  80 0038 4FF00200 		mov	r0, #2
  81 003c 4FF00001 		mov	r1, #0
  82 0040 FFF7FEFF 		bl	_msgq_open
  83 0044 0346     		mov	r3, r0
  84 0046 A7F87230 		strh	r3, [r7, #114]	@ movhi
  37:../Sources/DisplayTask.c **** 	
  38:../Sources/DisplayTask.c **** 	/* Initialize leds*/
  39:../Sources/DisplayTask.c **** 	for(i=0;i<4;i++){
  85              		.loc 1 39 0
  86 004a 4FF00003 		mov	r3, #0
  87 004e 7B67     		str	r3, [r7, #116]
  88 0050 2BE0     		b	.L2
  89              	.L3:
  40:../Sources/DisplayTask.c **** 		lwgpio_init( &leds[i], pins[i], LWGPIO_DIR_OUTPUT, LWGPIO_VALUE_HIGH);
  90              		.loc 1 40 0
  91 0052 07F12C02 		add	r2, r7, #44
  92 0056 7B6F     		ldr	r3, [r7, #116]
  93 0058 4FEA0313 		lsl	r3, r3, #4
  94 005c D218     		adds	r2, r2, r3
  95 005e 7B6F     		ldr	r3, [r7, #116]
  96 0060 4FEA8303 		lsl	r3, r3, #2
  97 0064 07F17801 		add	r1, r7, #120
  98 0068 CB18     		adds	r3, r1, r3
  99 006a 53F86C3C 		ldr	r3, [r3, #-108]
 100 006e 1046     		mov	r0, r2
 101 0070 1946     		mov	r1, r3
 102 0072 4FF00102 		mov	r2, #1
 103 0076 4FF00103 		mov	r3, #1
 104 007a FFF7FEFF 		bl	lwgpio_init
  41:../Sources/DisplayTask.c **** 		lwgpio_set_functionality( &leds[i], func[i]);
 105              		.loc 1 41 0
 106 007e 07F12C02 		add	r2, r7, #44
 107 0082 7B6F     		ldr	r3, [r7, #116]
 108 0084 4FEA0313 		lsl	r3, r3, #4
 109 0088 D218     		adds	r2, r2, r3
 110 008a 7B6F     		ldr	r3, [r7, #116]
 111 008c 4FEA8303 		lsl	r3, r3, #2
 112 0090 07F17801 		add	r1, r7, #120
 113 0094 CB18     		adds	r3, r1, r3
 114 0096 53F85C3C 		ldr	r3, [r3, #-92]
 115 009a 1046     		mov	r0, r2
 116 009c 1946     		mov	r1, r3
 117 009e FFF7FEFF 		bl	lwgpio_set_functionality
  39:../Sources/DisplayTask.c **** 	for(i=0;i<4;i++){
 118              		.loc 1 39 0
 119 00a2 7B6F     		ldr	r3, [r7, #116]
 120 00a4 03F10103 		add	r3, r3, #1
 121 00a8 7B67     		str	r3, [r7, #116]
 122              	.L2:
  39:../Sources/DisplayTask.c **** 	for(i=0;i<4;i++){
 123              		.loc 1 39 0 is_stmt 0
 124 00aa 7B6F     		ldr	r3, [r7, #116]
 125 00ac 032B     		cmp	r3, #3
 126 00ae D0D9     		bls	.L3
 127              	.L12:
  42:../Sources/DisplayTask.c **** 	}	
  43:../Sources/DisplayTask.c **** 	
  44:../Sources/DisplayTask.c **** 	
  45:../Sources/DisplayTask.c **** 	while(1){
  46:../Sources/DisplayTask.c **** 		
  47:../Sources/DisplayTask.c **** 		msg = _msgq_receive(my_qid, 1000); // returns null if no message after 1000ms
 128              		.loc 1 47 0 is_stmt 1
 129 00b0 B7F87230 		ldrh	r3, [r7, #114]
 130 00b4 1846     		mov	r0, r3
 131 00b6 4FF47A71 		mov	r1, #1000
 132 00ba FFF7FEFF 		bl	_msgq_receive
 133 00be F866     		str	r0, [r7, #108]
  48:../Sources/DisplayTask.c **** 		
  49:../Sources/DisplayTask.c **** 		if (msg != NULL ) {
 134              		.loc 1 49 0
 135 00c0 FB6E     		ldr	r3, [r7, #108]
 136 00c2 002B     		cmp	r3, #0
 137 00c4 50D0     		beq	.L4
  50:../Sources/DisplayTask.c **** 			printf("Display task received message %d: %d\n", msg->MESSAGE_TYPE,msg->DATA);
 138              		.loc 1 50 0
 139 00c6 FB6E     		ldr	r3, [r7, #108]
 140 00c8 1B7A     		ldrb	r3, [r3, #8]	@ zero_extendqisi2
 141 00ca 1A46     		mov	r2, r3
 142 00cc FB6E     		ldr	r3, [r7, #108]
 143 00ce DB68     		ldr	r3, [r3, #12]
 144 00d0 40F20000 		movw	r0, #:lower16:.LC3
 145 00d4 C0F20000 		movt	r0, #:upper16:.LC3
 146 00d8 1146     		mov	r1, r2
 147 00da 1A46     		mov	r2, r3
 148 00dc FFF7FEFF 		bl	_io_printf
  51:../Sources/DisplayTask.c **** 
  52:../Sources/DisplayTask.c **** 			switch (msg->MESSAGE_TYPE) {
 149              		.loc 1 52 0
 150 00e0 FB6E     		ldr	r3, [r7, #108]
 151 00e2 1B7A     		ldrb	r3, [r3, #8]	@ zero_extendqisi2
 152 00e4 042B     		cmp	r3, #4
 153 00e6 0BD0     		beq	.L7
 154 00e8 052B     		cmp	r3, #5
 155 00ea 23D0     		beq	.L8
 156 00ec 032B     		cmp	r3, #3
 157 00ee 37D1     		bne	.L5
 158              	.L6:
  53:../Sources/DisplayTask.c **** 			case SW1_Message:
  54:../Sources/DisplayTask.c **** 				lwgpio_set_value(&leds[0], LWGPIO_VALUE_LOW); // Orange -ON
 159              		.loc 1 54 0
 160 00f0 07F12C03 		add	r3, r7, #44
 161 00f4 1846     		mov	r0, r3
 162 00f6 4FF00001 		mov	r1, #0
 163 00fa FFF7FEFF 		bl	lwgpio_set_value
  55:../Sources/DisplayTask.c **** 				break;
 164              		.loc 1 55 0
 165 00fe 2FE0     		b	.L5
 166              	.L7:
  56:../Sources/DisplayTask.c **** 			case SW2_Message:
  57:../Sources/DisplayTask.c **** 				//lwgpio_set_value(&leds[1], msg->DATA);
  58:../Sources/DisplayTask.c **** 				lwgpio_set_value(&leds[0], LWGPIO_VALUE_HIGH); // Orange -off
 167              		.loc 1 58 0
 168 0100 07F12C03 		add	r3, r7, #44
 169 0104 1846     		mov	r0, r3
 170 0106 4FF00101 		mov	r1, #1
 171 010a FFF7FEFF 		bl	lwgpio_set_value
  59:../Sources/DisplayTask.c **** 				lwgpio_set_value(&leds[1], LWGPIO_VALUE_HIGH); // Yellow -off
 172              		.loc 1 59 0
 173 010e 07F12C03 		add	r3, r7, #44
 174 0112 03F11003 		add	r3, r3, #16
 175 0116 1846     		mov	r0, r3
 176 0118 4FF00101 		mov	r1, #1
 177 011c FFF7FEFF 		bl	lwgpio_set_value
  60:../Sources/DisplayTask.c **** 				lwgpio_set_value(&leds[3], LWGPIO_VALUE_HIGH); // Blue -off
 178              		.loc 1 60 0
 179 0120 07F12C03 		add	r3, r7, #44
 180 0124 03F13003 		add	r3, r3, #48
 181 0128 1846     		mov	r0, r3
 182 012a 4FF00101 		mov	r1, #1
 183 012e FFF7FEFF 		bl	lwgpio_set_value
  61:../Sources/DisplayTask.c **** 				break;
 184              		.loc 1 61 0
 185 0132 15E0     		b	.L5
 186              	.L8:
  62:../Sources/DisplayTask.c **** 			
  63:../Sources/DisplayTask.c **** 			case ADC_READ_MESSAGE:
  64:../Sources/DisplayTask.c **** 				if(msg->DATA<600){
 187              		.loc 1 64 0
 188 0134 FB6E     		ldr	r3, [r7, #108]
 189 0136 DA68     		ldr	r2, [r3, #12]
 190 0138 40F25723 		movw	r3, #599
 191 013c 9A42     		cmp	r2, r3
 192 013e 07D8     		bhi	.L9
  65:../Sources/DisplayTask.c **** 					lwgpio_toggle_value(&leds[2]);					
 193              		.loc 1 65 0
 194 0140 07F12C03 		add	r3, r7, #44
 195 0144 03F12003 		add	r3, r3, #32
 196 0148 1846     		mov	r0, r3
 197 014a FFF7FEFF 		bl	lwgpio_toggle_value
  66:../Sources/DisplayTask.c **** 				}
  67:../Sources/DisplayTask.c **** 				else {
  68:../Sources/DisplayTask.c **** 					/* Toggle blue LED */
  69:../Sources/DisplayTask.c **** 					lwgpio_toggle_value(&leds[3]);
  70:../Sources/DisplayTask.c **** 				}
  71:../Sources/DisplayTask.c **** 				break;
 198              		.loc 1 71 0
 199 014e 06E0     		b	.L13
 200              	.L9:
  69:../Sources/DisplayTask.c **** 					lwgpio_toggle_value(&leds[3]);
 201              		.loc 1 69 0
 202 0150 07F12C03 		add	r3, r7, #44
 203 0154 03F13003 		add	r3, r3, #48
 204 0158 1846     		mov	r0, r3
 205 015a FFF7FEFF 		bl	lwgpio_toggle_value
 206              	.L13:
 207              		.loc 1 71 0
 208 015e 00BF     		nop
 209              	.L5:
  72:../Sources/DisplayTask.c **** 			}			
  73:../Sources/DisplayTask.c **** 			_msg_free(msg);
 210              		.loc 1 73 0
 211 0160 F86E     		ldr	r0, [r7, #108]
 212 0162 FFF7FEFF 		bl	_msg_free
  74:../Sources/DisplayTask.c **** 		}
  75:../Sources/DisplayTask.c **** 		else{
  76:../Sources/DisplayTask.c **** 			lwgpio_toggle_value(&leds[2]); //toggle green LED
  77:../Sources/DisplayTask.c **** 		}
  78:../Sources/DisplayTask.c **** 		
  79:../Sources/DisplayTask.c **** 		//_time_delay(1000);
  80:../Sources/DisplayTask.c **** 		//_sched_yield();
  81:../Sources/DisplayTask.c **** 		//_task_block();
  82:../Sources/DisplayTask.c **** 	}  
 213              		.loc 1 82 0
 214 0166 A3E7     		b	.L12
 215              	.L4:
  76:../Sources/DisplayTask.c **** 			lwgpio_toggle_value(&leds[2]); //toggle green LED
 216              		.loc 1 76 0
 217 0168 07F12C03 		add	r3, r7, #44
 218 016c 03F12003 		add	r3, r3, #32
 219 0170 1846     		mov	r0, r3
 220 0172 FFF7FEFF 		bl	lwgpio_toggle_value
 221              		.loc 1 82 0
 222 0176 9BE7     		b	.L12
 223              		.cfi_endproc
 224              	.LFE0:
 226              		.text
 227              	.Letext0:
 228              		.file 2 "C:/Freescale/CW MCU v10.6/MCU/ARM_GCC_Support/ewl/EWL_C/include/cstdint"
 229              		.file 3 "C:/Freescale/Freescale_MQX_4_1/lib/twrk60n512.cw10gcc/debug/psp/MK60DZ10.h"
 230              		.file 4 "C:/Freescale/Freescale_MQX_4_1/lib/twrk60n512.cw10gcc/debug/bsp/lwgpio_kgpio.h"
 231              		.file 5 "C:/Freescale/Freescale_MQX_4_1/lib/twrk60n512.cw10gcc/debug/bsp/lwgpio.h"
 232              		.file 6 "C:/Freescale/Freescale_MQX_4_1/lib/twrk60n512.cw10gcc/debug/psp/message.h"
 233              		.file 7 "../Sources/main.h"
DEFINED SYMBOLS
                            *ABS*:00000000 DisplayTask.c
C:\Users\Angus\AppData\Local\Temp\ccRcqUPh.s:19     .rodata:00000000 $d
C:\Users\Angus\AppData\Local\Temp\ccRcqUPh.s:20     .rodata:00000000 .LC2
C:\Users\Angus\AppData\Local\Temp\ccRcqUPh.s:23     .rodata:00000018 .LC3
C:\Users\Angus\AppData\Local\Temp\ccRcqUPh.s:26     .rodata:00000040 .LC0
C:\Users\Angus\AppData\Local\Temp\ccRcqUPh.s:32     .rodata:00000050 .LC1
C:\Users\Angus\AppData\Local\Temp\ccRcqUPh.s:38     .text.Display_task:00000000 $t
C:\Users\Angus\AppData\Local\Temp\ccRcqUPh.s:43     .text.Display_task:00000000 Display_task
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
_io_printf
_msgq_open
lwgpio_init
lwgpio_set_functionality
_msgq_receive
lwgpio_set_value
lwgpio_toggle_value
_msg_free
